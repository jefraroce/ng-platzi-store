function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,o=new Array(e);r<e;r++)o[r]=t[r];return o}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _createSuper(t){return function(){var e,r=_getPrototypeOf(t);if(_isNativeReflectConstruct()){var o=_getPrototypeOf(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return _possibleConstructorReturn(this,e)}}function _possibleConstructorReturn(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{jkDv:function(t,e,r){"use strict";r.r(e),r.d(e,"AdminModule",(function(){return st}));var o=r("ofXK"),i=r("tyNb"),n=r("3Pt+"),a=r("fXoL"),c=r("X849"),s=r("dNgK"),u=r("Wp6s"),l=r("kmnG"),d=r("qFsG"),b=r("d3UM"),p=r("bTqV"),m=r("NFeN"),f=r("FKr1");function h(t,e){1&t&&(a.Ub(0,"mat-error"),a.Ac(1," El titulo es "),a.Ub(2,"strong"),a.Ac(3,"requerido"),a.Tb(),a.Tb())}function g(t,e){1&t&&(a.Ub(0,"mat-error"),a.Ac(1," El precio es "),a.Ub(2,"strong"),a.Ac(3,"requerido"),a.Tb(),a.Tb())}function y(t,e){1&t&&(a.Ub(0,"mat-error"),a.Ac(1," El precio debe ser mayor a 0 "),a.Tb())}function v(t,e){if(1&t&&(a.Ub(0,"mat-option",15),a.Ac(1),a.Tb()),2&t){var r=e.$implicit;a.mc("value",r),a.Cb(1),a.Cc(" ",r," ")}}function C(t,e){1&t&&(a.Ub(0,"mat-error"),a.Ac(1," La imagen es "),a.Ub(2,"strong"),a.Ac(3,"requerida"),a.Tb(),a.Tb())}var T,_=((T=function(){function t(e,r,o,i,a){_classCallCheck(this,t),this.fb=e,this.productsService=r,this.snackBar=o,this.route=i,this.router=a,this.product={id:null,title:null,image:null,price:null,description:null},this.productForm=this.fb.group({title:[this.product.title,n.p.required],image:[this.product.image,n.p.required],price:[this.product.price,n.p.required],description:this.product.description}),this.images=["assets/images/camiseta.png","assets/images/hoodie.png","assets/images/mug.png","assets/images/pin.png","assets/images/stickers1.png","assets/images/stickers2.png"]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.route.params.subscribe((function(e){var r=e.id;r&&t.fetchProduct(r)}))}},{key:"generateRandomId",value:function(){return Math.ceil(1e3*Math.random()).toString()}},{key:"fetchProduct",value:function(t){var e=this;this.productsService.getProduct(t).subscribe((function(t){e.product=t,e.productForm.reset(e.product)}))}},{key:"createProduct",value:function(t){var e=this;this.productsService.createProduct(t).subscribe((function(t){e.snackBar.open("Felicidades tu producto ha sido creado."),e.router.navigate(["/admin/products",t.id,"edit"])}),(function(t){console.error("Error ",t),e.snackBar.open("No se ha podido crear el producto.")}))}},{key:"updateProduct",value:function(t){var e=this;this.productsService.updateProduct(t.id,t).subscribe((function(t){e.product=t,e.snackBar.open("Felicidades tu producto ha sido actualizado.")}),(function(t){console.error("Error ",t),e.snackBar.open("No se ha podido actualizar el producto.")}))}},{key:"onSubmit",value:function(){if(this.productForm.valid){var t=this.productForm.value;this.product.id?(t.id=this.product.id,this.updateProduct(t)):(t.id=this.generateRandomId(),this.createProduct(t))}else this.snackBar.open("Debes completar todos los campos obligatorios.")}}]),t}()).\u0275fac=function(t){return new(t||T)(a.Ob(n.b),a.Ob(c.a),a.Ob(s.a),a.Ob(i.a),a.Ob(i.c))},T.\u0275cmp=a.Ib({type:T,selectors:[["app-product-form"]],decls:36,vars:8,consts:[["novalidate","",1,"max-width--600","mx-auto",3,"formGroup","ngSubmit"],[1,"shipping-card"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","placeholder","Titulo","formControlName","title","required",""],[4,"ngIf"],["matInput","","type","number","min","0","placeholder","Precio","formControlName","price"],[1,"full-width"],["placeholder","Imagen","formControlName","image","appearance","outline"],[3,"value",4,"ngFor","ngForOf"],["for","description"],["matNativeControl","","id","description","name","description","formControlName","description","required",""],["mat-raised-button","","color","primary","type","submit"],["mat-button","","color","secondary","routerLink","/admin/products"],[3,"value"]],template:function(t,e){1&t&&(a.Ub(0,"form",0),a.cc("ngSubmit",(function(){return e.onSubmit()})),a.Ub(1,"mat-card",1),a.Ub(2,"mat-card-header"),a.Ub(3,"mat-card-title"),a.Ac(4),a.Tb(),a.Tb(),a.Ub(5,"mat-card-content"),a.Ub(6,"div",2),a.Ub(7,"div",3),a.Ub(8,"mat-form-field",4),a.Pb(9,"input",5),a.yc(10,h,4,0,"mat-error",6),a.Tb(),a.Tb(),a.Tb(),a.Ub(11,"div",2),a.Ub(12,"div",3),a.Ub(13,"mat-form-field",4),a.Pb(14,"input",7),a.yc(15,g,4,0,"mat-error",6),a.yc(16,y,2,0,"mat-error",6),a.Tb(),a.Tb(),a.Tb(),a.Ub(17,"div",2),a.Ub(18,"div",3),a.Ub(19,"mat-form-field",8),a.Ub(20,"mat-select",9),a.yc(21,v,2,2,"mat-option",10),a.Tb(),a.yc(22,C,4,0,"mat-error",6),a.Tb(),a.Tb(),a.Tb(),a.Ub(23,"div",2),a.Ub(24,"div",3),a.Ub(25,"mat-form-field",4),a.Ub(26,"mat-label",11),a.Ac(27,"Descripci\xf3n"),a.Tb(),a.Pb(28,"textarea",12),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Ub(29,"mat-card-actions"),a.Ub(30,"button",13),a.Ub(31,"mat-icon"),a.Ac(32,"save"),a.Tb(),a.Ac(33),a.Tb(),a.Ub(34,"a",14),a.Ac(35,"Volver a la lista"),a.Tb(),a.Tb(),a.Tb(),a.Tb()),2&t&&(a.mc("formGroup",e.productForm),a.Cb(4),a.Cc("",e.product.id?"Editando":"Nuevo"," Producto"),a.Cb(6),a.mc("ngIf",e.productForm.controls.title.hasError("required")),a.Cb(5),a.mc("ngIf",e.productForm.controls.price.hasError("required")),a.Cb(1),a.mc("ngIf",e.productForm.controls.price.hasError("min")),a.Cb(5),a.mc("ngForOf",e.images),a.Cb(1),a.mc("ngIf",e.productForm.controls.image.hasError("required")),a.Cb(11),a.Cc("\xa0 ",e.product.id?"Actualizar":"Crear"," "))},directives:[n.q,n.j,n.e,u.a,u.e,u.h,u.d,l.c,d.a,n.a,n.i,n.d,n.o,o.l,n.m,b.a,o.k,l.f,u.b,p.b,m.a,p.a,i.e,l.b,f.j],styles:[".full-width[_ngcontent-%COMP%]{width:100%}.shipping-card[_ngcontent-%COMP%]{min-width:120px;margin:20px auto}.mat-radio-button[_ngcontent-%COMP%]{display:block;margin:5px 0}.row[_ngcontent-%COMP%]{display:flex;flex-direction:row}.col[_ngcontent-%COMP%]{flex:1;margin-right:20px}.col[_ngcontent-%COMP%]:last-child{margin-right:0}"]}),T),U=r("0MNC"),P=r("lJxs"),k=r("UXun"),w=r("XhcP"),O=r("/t3+"),A=r("MutI");function S(t,e){if(1&t){var r=a.Vb();a.Ub(0,"button",8),a.cc("click",(function(){return a.sc(r),a.gc(),a.qc(2).toggle()})),a.Ub(1,"mat-icon",9),a.Ac(2,"menu"),a.Tb(),a.Tb()}}var I,x=((I=function t(e){_classCallCheck(this,t),this.breakpointObserver=e,this.isHandset$=this.breakpointObserver.observe(U.b.Handset).pipe(Object(P.a)((function(t){return t.matches})),Object(k.a)())}).\u0275fac=function(t){return new(t||I)(a.Ob(U.a))},I.\u0275cmp=a.Ib({type:I,selectors:[["app-nav"]],decls:22,vars:12,consts:[[1,"sidenav-container"],["fixedInViewport","",1,"sidenav",3,"mode","opened"],["drawer",""],["mat-list-item","","routerLink","/admin/create"],["mat-list-item","","routerLink","/admin/products"],["mat-list-item","","routerLink","#"],["color","primary"],["type","button","aria-label","Toggle sidenav","mat-icon-button","",3,"click",4,"ngIf"],["type","button","aria-label","Toggle sidenav","mat-icon-button","",3,"click"],["aria-label","Side nav toggle icon"]],template:function(t,e){1&t&&(a.Ub(0,"mat-sidenav-container",0),a.Ub(1,"mat-sidenav",1,2),a.hc(3,"async"),a.hc(4,"async"),a.hc(5,"async"),a.Ub(6,"mat-toolbar"),a.Ac(7,"Menu"),a.Tb(),a.Ub(8,"mat-nav-list"),a.Ub(9,"a",3),a.Ac(10,"Crear producto"),a.Tb(),a.Ub(11,"a",4),a.Ac(12,"Ver productos"),a.Tb(),a.Ub(13,"a",5),a.Ac(14,"Link 3"),a.Tb(),a.Tb(),a.Tb(),a.Ub(15,"mat-sidenav-content"),a.Ub(16,"mat-toolbar",6),a.yc(17,S,3,0,"button",7),a.hc(18,"async"),a.Ub(19,"span"),a.Ac(20,"Platzi Store"),a.Tb(),a.Tb(),a.Pb(21,"router-outlet"),a.Tb(),a.Tb()),2&t&&(a.Cb(1),a.mc("mode",a.ic(4,6,e.isHandset$)?"over":"side")("opened",!1===a.ic(5,8,e.isHandset$)),a.Db("role",a.ic(3,4,e.isHandset$)?"dialog":"navigation"),a.Cb(16),a.mc("ngIf",a.ic(18,10,e.isHandset$)))},directives:[w.b,w.a,O.a,A.c,A.a,i.e,w.c,o.l,i.g,p.b,m.a],pipes:[o.b],styles:[".sidenav-container[_ngcontent-%COMP%]{height:100%}.sidenav[_ngcontent-%COMP%]{width:200px}.sidenav[_ngcontent-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{background:inherit}.mat-toolbar.mat-primary[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;top:0;z-index:1}"]}),I),D=r("M9IT"),M=r("Dh3D"),R=r("+0xr"),j=r("0EQZ"),E=r("LRne"),F=r("VRyK"),L=function(t){_inherits(r,t);var e=_createSuper(r);function r(t){var o;return _classCallCheck(this,r),(o=e.call(this)).products=t,o.data=[],o.data=t,o}return _createClass(r,[{key:"connect",value:function(){var t=this,e=[Object(E.a)(this.data),this.paginator.page,this.sort.sortChange];return Object(F.a).apply(void 0,e).pipe(Object(P.a)((function(){return t.getPagedData(t.getSortedData(_toConsumableArray(t.data)))})))}},{key:"disconnect",value:function(){}},{key:"getPagedData",value:function(t){return t.splice(this.paginator.pageIndex*this.paginator.pageSize,this.paginator.pageSize)}},{key:"getSortedData",value:function(t){var e=this;return this.sort.active&&""!==this.sort.direction?t.sort((function(t,r){var o="asc"===e.sort.direction;switch(e.sort.active){case"title":return N(t.title,r.title,o);case"id":return N(t.id,r.id,o);default:return 0}})):t}}]),r}(j.b);function N(t,e,r){return(t<e?-1:1)*(r?1:-1)}function q(t,e){1&t&&(a.Ub(0,"th",18),a.Ac(1,"Imagen"),a.Tb())}function z(t,e){if(1&t&&(a.Ub(0,"td",19),a.Pb(1,"img",20),a.Tb()),2&t){var r=e.$implicit;a.Cb(1),a.mc("src",r.image,a.tc)}}function B(t,e){1&t&&(a.Ub(0,"th",18),a.Ac(1,"Id"),a.Tb())}function $(t,e){if(1&t&&(a.Ub(0,"td",19),a.Ac(1),a.Tb()),2&t){var r=e.$implicit;a.Cb(1),a.Bc(r.id)}}function H(t,e){1&t&&(a.Ub(0,"th",18),a.Ac(1,"Titulo"),a.Tb())}function V(t,e){if(1&t&&(a.Ub(0,"td",19),a.Ac(1),a.Tb()),2&t){var r=e.$implicit;a.Cb(1),a.Bc(r.title)}}function X(t,e){1&t&&(a.Ub(0,"th",18),a.Ac(1,"Descripci\xf3n"),a.Tb())}function G(t,e){if(1&t&&(a.Ub(0,"td",19),a.Ac(1),a.hc(2,"slice"),a.Tb()),2&t){var r=e.$implicit;a.Cb(1),a.Bc(a.jc(2,1,r.description,0,80))}}function K(t,e){1&t&&(a.Ub(0,"th",18),a.Ac(1,"Precio"),a.Tb())}function J(t,e){if(1&t&&(a.Ub(0,"td",21),a.Ac(1),a.hc(2,"currency"),a.Tb()),2&t){var r=e.$implicit;a.Cb(1),a.Bc(a.ic(2,1,r.price))}}function W(t,e){1&t&&a.Pb(0,"th",22)}var Q=function(t){return["/admin/products",t,"edit"]};function Z(t,e){if(1&t){var r=a.Vb();a.Ub(0,"td",23),a.Ub(1,"a",24),a.Ub(2,"mat-icon"),a.Ac(3,"create"),a.Tb(),a.Tb(),a.Ub(4,"button",25),a.cc("click",(function(){a.sc(r);var t=e.$implicit;return a.gc().deleteProduct(t.id)})),a.Ub(5,"mat-icon"),a.Ac(6,"delete"),a.Tb(),a.Tb(),a.Tb()}if(2&t){var o=e.$implicit;a.Cb(1),a.mc("routerLink",a.oc(1,Q,o.id))}}function Y(t,e){1&t&&a.Pb(0,"tr",26)}function tt(t,e){1&t&&a.Pb(0,"tr",27)}var et,rt,ot,it=function(){return[25,50,100,250]},nt=[{path:"",component:x,children:[{path:"create",component:_},{path:"products",component:(et=function(){function t(e,r){_classCallCheck(this,t),this.productsService=e,this.snackBar=r,this.displayedColumns=["id","image","title","description","price","actions"]}return _createClass(t,[{key:"ngOnInit",value:function(){this.fetchProducts()}},{key:"fetchProducts",value:function(){var t=this;this.productsService.getAllProducts().subscribe((function(e){t.dataSource=new L(e),t.dataSource.sort=t.sort,t.dataSource.paginator=t.paginator,t.table.dataSource=t.dataSource}))}},{key:"deleteProduct",value:function(t){var e=this;confirm("\xbfEsta usted seguro?")&&this.productsService.deleteProduct(t).subscribe((function(t){e.fetchProducts()}),(function(t){console.error("Error deleting product ",t),e.snackBar.open("No se ha podido eliminar el producto.")}))}}]),t}(),et.\u0275fac=function(t){return new(t||et)(a.Ob(c.a),a.Ob(s.a))},et.\u0275cmp=a.Ib({type:et,selectors:[["app-product-list"]],viewQuery:function(t,e){var r;1&t&&(a.Fc(D.a,!0),a.Fc(M.a,!0),a.Fc(R.j,!0)),2&t&&(a.pc(r=a.dc())&&(e.paginator=r.first),a.pc(r=a.dc())&&(e.sort=r.first),a.pc(r=a.dc())&&(e.table=r.first))},decls:26,vars:7,consts:[[1,"mat-elevation-z8","max-width--900","m-1","table-container"],["mat-table","","matSort","","aria-label","Elements",1,"full-width-table"],["matColumnDef","image"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","id"],["matColumnDef","title"],["matColumnDef","description"],["matColumnDef","price"],["mat-cell","","class","text-right",4,"matCellDef"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","text-center",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageIndex","pageSize","pageSizeOptions"],["paginator",""],["mat-raised-button","","color","primary","routerLink","/admin/create"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["alt","",1,"thumbnail",3,"src"],["mat-cell","",1,"text-right"],["mat-header-cell",""],["mat-cell","",1,"text-center"],["mat-icon-button","","color","primary","aria-label","Boton para editar producto","title","Editar",3,"routerLink"],["mat-icon-button","","color","warn","aria-label","Boton para eliminar producto","title","Eliminar",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(a.Ub(0,"div",0),a.Ub(1,"table",1),a.Sb(2,2),a.yc(3,q,2,0,"th",3),a.yc(4,z,2,1,"td",4),a.Rb(),a.Sb(5,5),a.yc(6,B,2,0,"th",3),a.yc(7,$,2,1,"td",4),a.Rb(),a.Sb(8,6),a.yc(9,H,2,0,"th",3),a.yc(10,V,2,1,"td",4),a.Rb(),a.Sb(11,7),a.yc(12,X,2,0,"th",3),a.yc(13,G,3,5,"td",4),a.Rb(),a.Sb(14,8),a.yc(15,K,2,0,"th",3),a.yc(16,J,3,3,"td",9),a.Rb(),a.Sb(17,10),a.yc(18,W,1,0,"th",11),a.yc(19,Z,7,3,"td",12),a.Rb(),a.yc(20,Y,1,0,"tr",13),a.yc(21,tt,1,0,"tr",14),a.Tb(),a.Pb(22,"mat-paginator",15,16),a.Tb(),a.Ub(24,"a",17),a.Ac(25,"Crear producto"),a.Tb()),2&t&&(a.Cb(20),a.mc("matHeaderRowDef",e.displayedColumns),a.Cb(1),a.mc("matRowDefColumns",e.displayedColumns),a.Cb(1),a.mc("length",null==e.dataSource?null:e.dataSource.data.length)("pageIndex",0)("pageSize",50)("pageSizeOptions",a.nc(6,it)))},directives:[R.j,M.a,R.c,R.e,R.b,R.g,R.i,D.a,p.a,i.e,R.d,M.b,R.a,m.a,p.b,R.f,R.h],pipes:[o.r,o.d],styles:["[_nghost-%COMP%]{display:block;width:calc(100% - 32px);box-sizing:border-box;margin:0 auto}.table-container[_ngcontent-%COMP%]{display:block;width:100%;overflow-x:auto}.full-width-table[_ngcontent-%COMP%]{width:100%}"]}),et)},{path:"products/:id/edit",component:_}]}],at=((rt=function t(){_classCallCheck(this,t)}).\u0275mod=a.Mb({type:rt}),rt.\u0275inj=a.Lb({factory:function(t){return new(t||rt)},imports:[[i.f.forChild(nt)],i.f]}),rt),ct=r("hctd"),st=((ot=function t(){_classCallCheck(this,t)}).\u0275mod=a.Mb({type:ot}),ot.\u0275inj=a.Lb({factory:function(t){return new(t||ot)},imports:[[o.c,at,n.n,ct.a,U.c]]}),ot)}}]);