function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,o=new Array(e);r<e;r++)o[r]=t[r];return o}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _createSuper(t){return function(){var e,r=_getPrototypeOf(t);if(_isNativeReflectConstruct()){var o=_getPrototypeOf(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return _possibleConstructorReturn(this,e)}}function _possibleConstructorReturn(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{jkDv:function(t,e,r){"use strict";r.r(e),r.d(e,"AdminModule",(function(){return st}));var o=r("ofXK"),a=r("tyNb"),i=r("3Pt+"),n=r("fXoL"),c=r("X849"),s=r("dNgK"),u=r("Wp6s"),l=r("kmnG"),d=r("qFsG"),b=r("d3UM"),p=r("bTqV"),m=r("NFeN"),f=r("FKr1");function h(t,e){1&t&&(n.Ub(0,"mat-error"),n.Ac(1," El titulo es "),n.Ub(2,"strong"),n.Ac(3,"requerido"),n.Tb(),n.Tb())}function g(t,e){1&t&&(n.Ub(0,"mat-error"),n.Ac(1," El precio es "),n.Ub(2,"strong"),n.Ac(3,"requerido"),n.Tb(),n.Tb())}function y(t,e){1&t&&(n.Ub(0,"mat-error"),n.Ac(1," El precio debe ser mayor a 0 "),n.Tb())}function v(t,e){if(1&t&&(n.Ub(0,"mat-option",15),n.Ac(1),n.Tb()),2&t){var r=e.$implicit;n.mc("value",r),n.Cb(1),n.Cc(" ",r," ")}}function C(t,e){1&t&&(n.Ub(0,"mat-error"),n.Ac(1," La imagen es "),n.Ub(2,"strong"),n.Ac(3,"requerida"),n.Tb(),n.Tb())}var T,_=((T=function(){function t(e,r,o,a,n){_classCallCheck(this,t),this.fb=e,this.productsService=r,this.snackBar=o,this.route=a,this.router=n,this.product={id:null,title:null,image:null,price:null,description:null},this.productForm=this.fb.group({title:[this.product.title,i.p.required],image:[this.product.image,i.p.required],price:[this.product.price,i.p.required],description:this.product.description}),this.images=["assets/images/camiseta.png","assets/images/hoodie.png","assets/images/mug.png","assets/images/pin.png","assets/images/stickers1.png","assets/images/stickers2.png"]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.route.params.subscribe((function(e){var r=e.id;r&&t.fetchProduct(r)}))}},{key:"generateRandomId",value:function(){return Math.ceil(1e3*Math.random()).toString()}},{key:"fetchProduct",value:function(t){var e=this;this.productsService.getProduct(t).subscribe((function(t){e.product=t,e.productForm.reset(e.product)}))}},{key:"createProduct",value:function(t){var e=this;this.productsService.createProduct(t).subscribe((function(t){e.snackBar.open("Felicidades tu producto ha sido creado."),e.router.navigate(["/admin/products",t.id,"edit"])}),(function(t){console.error("Error ",t),e.snackBar.open("No se ha podido crear el producto.")}))}},{key:"updateProduct",value:function(t){var e=this;this.productsService.updateProduct(t.id,t).subscribe((function(t){e.product=t,e.snackBar.open("Felicidades tu producto ha sido actualizado.")}),(function(t){console.error("Error ",t),e.snackBar.open("No se ha podido actualizar el producto.")}))}},{key:"onSubmit",value:function(){if(this.productForm.valid){var t=this.productForm.value;this.product.id?(t.id=this.product.id,this.updateProduct(t)):(t.id=this.generateRandomId(),this.createProduct(t))}else this.snackBar.open("Debes completar todos los campos obligatorios.")}}]),t}()).\u0275fac=function(t){return new(t||T)(n.Ob(i.b),n.Ob(c.a),n.Ob(s.a),n.Ob(a.a),n.Ob(a.c))},T.\u0275cmp=n.Ib({type:T,selectors:[["app-product-form"]],decls:36,vars:8,consts:[["novalidate","",1,"max-width--600","mx-auto",3,"formGroup","ngSubmit"],[1,"shipping-card"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","placeholder","Titulo","formControlName","title","required",""],[4,"ngIf"],["matInput","","type","number","min","0","placeholder","Precio","formControlName","price"],[1,"full-width"],["placeholder","Imagen","formControlName","image","appearance","outline"],[3,"value",4,"ngFor","ngForOf"],["for","description"],["matNativeControl","","id","description","name","description","formControlName","description","required",""],["mat-raised-button","","color","primary","type","submit"],["mat-button","","color","secondary","routerLink","/admin/products"],[3,"value"]],template:function(t,e){1&t&&(n.Ub(0,"form",0),n.cc("ngSubmit",(function(){return e.onSubmit()})),n.Ub(1,"mat-card",1),n.Ub(2,"mat-card-header"),n.Ub(3,"mat-card-title"),n.Ac(4),n.Tb(),n.Tb(),n.Ub(5,"mat-card-content"),n.Ub(6,"div",2),n.Ub(7,"div",3),n.Ub(8,"mat-form-field",4),n.Pb(9,"input",5),n.yc(10,h,4,0,"mat-error",6),n.Tb(),n.Tb(),n.Tb(),n.Ub(11,"div",2),n.Ub(12,"div",3),n.Ub(13,"mat-form-field",4),n.Pb(14,"input",7),n.yc(15,g,4,0,"mat-error",6),n.yc(16,y,2,0,"mat-error",6),n.Tb(),n.Tb(),n.Tb(),n.Ub(17,"div",2),n.Ub(18,"div",3),n.Ub(19,"mat-form-field",8),n.Ub(20,"mat-select",9),n.yc(21,v,2,2,"mat-option",10),n.Tb(),n.yc(22,C,4,0,"mat-error",6),n.Tb(),n.Tb(),n.Tb(),n.Ub(23,"div",2),n.Ub(24,"div",3),n.Ub(25,"mat-form-field",4),n.Ub(26,"mat-label",11),n.Ac(27,"Descripci\xf3n"),n.Tb(),n.Pb(28,"textarea",12),n.Tb(),n.Tb(),n.Tb(),n.Tb(),n.Ub(29,"mat-card-actions"),n.Ub(30,"button",13),n.Ub(31,"mat-icon"),n.Ac(32,"save"),n.Tb(),n.Ac(33),n.Tb(),n.Ub(34,"a",14),n.Ac(35,"Volver a la lista"),n.Tb(),n.Tb(),n.Tb(),n.Tb()),2&t&&(n.mc("formGroup",e.productForm),n.Cb(4),n.Cc("",e.product.id?"Editando":"Nuevo"," Producto"),n.Cb(6),n.mc("ngIf",e.productForm.controls.title.hasError("required")),n.Cb(5),n.mc("ngIf",e.productForm.controls.price.hasError("required")),n.Cb(1),n.mc("ngIf",e.productForm.controls.price.hasError("min")),n.Cb(5),n.mc("ngForOf",e.images),n.Cb(1),n.mc("ngIf",e.productForm.controls.image.hasError("required")),n.Cb(11),n.Cc("\xa0 ",e.product.id?"Actualizar":"Crear"," "))},directives:[i.q,i.j,i.e,u.a,u.e,u.h,u.d,l.c,d.a,i.a,i.i,i.d,i.o,o.l,i.m,b.a,o.k,l.f,u.b,p.b,m.a,p.a,a.e,l.b,f.j],styles:[".full-width[_ngcontent-%COMP%]{width:100%}.shipping-card[_ngcontent-%COMP%]{min-width:120px;margin:20px auto}.mat-radio-button[_ngcontent-%COMP%]{display:block;margin:5px 0}.row[_ngcontent-%COMP%]{display:flex;flex-direction:row}.col[_ngcontent-%COMP%]{flex:1;margin-right:20px}.col[_ngcontent-%COMP%]:last-child{margin-right:0}"]}),T),k=r("0MNC"),U=r("lJxs"),P=r("UXun"),O=r("XhcP"),w=r("/t3+"),S=r("MutI");function A(t,e){if(1&t){var r=n.Vb();n.Ub(0,"button",8),n.cc("click",(function(){return n.sc(r),n.gc(),n.qc(2).toggle()})),n.Ub(1,"mat-icon",9),n.Ac(2,"menu"),n.Tb(),n.Tb()}}var I,D=((I=function t(e){_classCallCheck(this,t),this.breakpointObserver=e,this.isHandset$=this.breakpointObserver.observe(k.b.Handset).pipe(Object(U.a)((function(t){return t.matches})),Object(P.a)())}).\u0275fac=function(t){return new(t||I)(n.Ob(k.a))},I.\u0275cmp=n.Ib({type:I,selectors:[["app-nav"]],decls:22,vars:12,consts:[[1,"sidenav-container"],["fixedInViewport","",1,"sidenav",3,"mode","opened"],["drawer",""],["mat-list-item","","routerLink","/admin/create"],["mat-list-item","","routerLink","/admin/products"],["mat-list-item","","routerLink","#"],["color","primary"],["type","button","aria-label","Toggle sidenav","mat-icon-button","",3,"click",4,"ngIf"],["type","button","aria-label","Toggle sidenav","mat-icon-button","",3,"click"],["aria-label","Side nav toggle icon"]],template:function(t,e){1&t&&(n.Ub(0,"mat-sidenav-container",0),n.Ub(1,"mat-sidenav",1,2),n.hc(3,"async"),n.hc(4,"async"),n.hc(5,"async"),n.Ub(6,"mat-toolbar"),n.Ac(7,"Menu"),n.Tb(),n.Ub(8,"mat-nav-list"),n.Ub(9,"a",3),n.Ac(10,"Crear producto"),n.Tb(),n.Ub(11,"a",4),n.Ac(12,"Ver productos"),n.Tb(),n.Ub(13,"a",5),n.Ac(14,"Link 3"),n.Tb(),n.Tb(),n.Tb(),n.Ub(15,"mat-sidenav-content"),n.Ub(16,"mat-toolbar",6),n.yc(17,A,3,0,"button",7),n.hc(18,"async"),n.Ub(19,"span"),n.Ac(20,"Platzi Store"),n.Tb(),n.Tb(),n.Pb(21,"router-outlet"),n.Tb(),n.Tb()),2&t&&(n.Cb(1),n.mc("mode",n.ic(4,6,e.isHandset$)?"over":"side")("opened",!1===n.ic(5,8,e.isHandset$)),n.Db("role",n.ic(3,4,e.isHandset$)?"dialog":"navigation"),n.Cb(16),n.mc("ngIf",n.ic(18,10,e.isHandset$)))},directives:[O.b,O.a,w.a,S.c,S.a,a.e,O.c,o.l,a.g,p.b,m.a],pipes:[o.b],styles:[".sidenav-container[_ngcontent-%COMP%]{height:100%}.sidenav[_ngcontent-%COMP%]{width:200px}.sidenav[_ngcontent-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{background:inherit}.mat-toolbar.mat-primary[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;top:0;z-index:1}"]}),I),x=r("M9IT"),R=r("Dh3D"),M=r("+0xr"),j=r("0EQZ"),F=r("LRne"),E=r("VRyK"),L=function(t){_inherits(r,t);var e=_createSuper(r);function r(t){var o;return _classCallCheck(this,r),(o=e.call(this)).products=t,o.data=[],o.data=t,o}return _createClass(r,[{key:"connect",value:function(){var t=this,e=[Object(F.a)(this.data),this.paginator.page,this.sort.sortChange];return Object(E.a).apply(void 0,e).pipe(Object(U.a)((function(){return t.getPagedData(t.getSortedData(_toConsumableArray(t.data)))})))}},{key:"disconnect",value:function(){}},{key:"getPagedData",value:function(t){return t.splice(this.paginator.pageIndex*this.paginator.pageSize,this.paginator.pageSize)}},{key:"getSortedData",value:function(t){var e=this;return this.sort.active&&""!==this.sort.direction?t.sort((function(t,r){var o="asc"===e.sort.direction;switch(e.sort.active){case"title":return N(t.title,r.title,o);case"id":return N(t.id,r.id,o);default:return 0}})):t}}]),r}(j.b);function N(t,e,r){return(t<e?-1:1)*(r?1:-1)}function q(t,e){1&t&&(n.Ub(0,"th",18),n.Ac(1,"Imagen"),n.Tb())}function z(t,e){if(1&t&&(n.Ub(0,"td",19),n.Pb(1,"img",20),n.Tb()),2&t){var r=e.$implicit;n.Cb(1),n.mc("src",r.image,n.tc)}}function B(t,e){1&t&&(n.Ub(0,"th",18),n.Ac(1,"Id"),n.Tb())}function $(t,e){if(1&t&&(n.Ub(0,"td",19),n.Ac(1),n.Tb()),2&t){var r=e.$implicit;n.Cb(1),n.Bc(r.id)}}function H(t,e){1&t&&(n.Ub(0,"th",18),n.Ac(1,"Titulo"),n.Tb())}function V(t,e){if(1&t&&(n.Ub(0,"td",19),n.Ac(1),n.Tb()),2&t){var r=e.$implicit;n.Cb(1),n.Bc(r.title)}}function G(t,e){1&t&&(n.Ub(0,"th",18),n.Ac(1,"Descripci\xf3n"),n.Tb())}function X(t,e){if(1&t&&(n.Ub(0,"td",19),n.Ac(1),n.hc(2,"slice"),n.Tb()),2&t){var r=e.$implicit;n.Cb(1),n.Bc(n.jc(2,1,r.description,0,80))}}function K(t,e){1&t&&(n.Ub(0,"th",18),n.Ac(1,"Precio"),n.Tb())}function J(t,e){if(1&t&&(n.Ub(0,"td",21),n.Ac(1),n.hc(2,"currency"),n.Tb()),2&t){var r=e.$implicit;n.Cb(1),n.Bc(n.ic(2,1,r.price))}}function W(t,e){1&t&&n.Pb(0,"th",22)}var Q=function(t){return["/admin/products",t,"edit"]};function Z(t,e){if(1&t){var r=n.Vb();n.Ub(0,"td",23),n.Ub(1,"a",24),n.Ub(2,"mat-icon"),n.Ac(3,"create"),n.Tb(),n.Tb(),n.Ub(4,"button",25),n.cc("click",(function(){n.sc(r);var t=e.$implicit;return n.gc().deleteProduct(t.id)})),n.Ub(5,"mat-icon"),n.Ac(6,"delete"),n.Tb(),n.Tb(),n.Tb()}if(2&t){var o=e.$implicit;n.Cb(1),n.mc("routerLink",n.oc(1,Q,o.id))}}function Y(t,e){1&t&&n.Pb(0,"tr",26)}function tt(t,e){1&t&&n.Pb(0,"tr",27)}var et,rt,ot,at=function(){return[25,50,100,250]},it=[{path:"",component:D,children:[{path:"create",component:_},{path:"products",component:(et=function(){function t(e,r,o){_classCallCheck(this,t),this.productsService=e,this.snackBar=r,this.changeDetectorRefs=o,this.displayedColumns=["id","image","title","description","price","actions"]}return _createClass(t,[{key:"ngOnInit",value:function(){this.fetchProducts()}},{key:"fetchProducts",value:function(){var t=this;this.productsService.getAllProducts().subscribe((function(e){t.setDataSource(e)}))}},{key:"setDataSource",value:function(t){this.dataSource=new L(t),this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator,this.table.dataSource=this.dataSource}},{key:"deleteProduct",value:function(t){var e=this;confirm("\xbfEsta usted seguro?")&&this.productsService.deleteProduct(t).subscribe((function(){var r=e.dataSource.data.findIndex((function(e){return e.id===t}));r>=0&&(e.dataSource.data.splice(r,1),e.setDataSource(e.dataSource.data),e.snackBar.open("Genial el producto ha sido eliminado."))}),(function(t){console.error("Error deleting product ",t),e.snackBar.open("No se ha podido eliminar el producto.")}))}}]),t}(),et.\u0275fac=function(t){return new(t||et)(n.Ob(c.a),n.Ob(s.a),n.Ob(n.h))},et.\u0275cmp=n.Ib({type:et,selectors:[["app-product-list"]],viewQuery:function(t,e){var r;1&t&&(n.Fc(x.a,!0),n.Fc(R.a,!0),n.Fc(M.j,!0)),2&t&&(n.pc(r=n.dc())&&(e.paginator=r.first),n.pc(r=n.dc())&&(e.sort=r.first),n.pc(r=n.dc())&&(e.table=r.first))},decls:26,vars:7,consts:[[1,"mat-elevation-z8","max-width--900","m-1","table-container"],["mat-table","","matSort","","aria-label","Productos",1,"full-width-table"],["matColumnDef","image"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","id"],["matColumnDef","title"],["matColumnDef","description"],["matColumnDef","price"],["mat-cell","","class","text-right",4,"matCellDef"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","text-center",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageIndex","pageSize","pageSizeOptions"],["paginator",""],["mat-raised-button","","color","primary","routerLink","/admin/create"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["alt","",1,"thumbnail",3,"src"],["mat-cell","",1,"text-right"],["mat-header-cell",""],["mat-cell","",1,"text-center"],["mat-icon-button","","color","primary","aria-label","Boton para editar producto","title","Editar",3,"routerLink"],["mat-icon-button","","color","warn","aria-label","Boton para eliminar producto","title","Eliminar",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(n.Ub(0,"div",0),n.Ub(1,"table",1),n.Sb(2,2),n.yc(3,q,2,0,"th",3),n.yc(4,z,2,1,"td",4),n.Rb(),n.Sb(5,5),n.yc(6,B,2,0,"th",3),n.yc(7,$,2,1,"td",4),n.Rb(),n.Sb(8,6),n.yc(9,H,2,0,"th",3),n.yc(10,V,2,1,"td",4),n.Rb(),n.Sb(11,7),n.yc(12,G,2,0,"th",3),n.yc(13,X,3,5,"td",4),n.Rb(),n.Sb(14,8),n.yc(15,K,2,0,"th",3),n.yc(16,J,3,3,"td",9),n.Rb(),n.Sb(17,10),n.yc(18,W,1,0,"th",11),n.yc(19,Z,7,3,"td",12),n.Rb(),n.yc(20,Y,1,0,"tr",13),n.yc(21,tt,1,0,"tr",14),n.Tb(),n.Pb(22,"mat-paginator",15,16),n.Tb(),n.Ub(24,"a",17),n.Ac(25,"Crear producto"),n.Tb()),2&t&&(n.Cb(20),n.mc("matHeaderRowDef",e.displayedColumns),n.Cb(1),n.mc("matRowDefColumns",e.displayedColumns),n.Cb(1),n.mc("length",null==e.dataSource?null:e.dataSource.data.length)("pageIndex",0)("pageSize",50)("pageSizeOptions",n.nc(6,at)))},directives:[M.j,R.a,M.c,M.e,M.b,M.g,M.i,x.a,p.a,a.e,M.d,R.b,M.a,m.a,p.b,M.f,M.h],pipes:[o.r,o.d],styles:["[_nghost-%COMP%]{display:block;width:calc(100% - 32px);box-sizing:border-box;margin:0 auto}.table-container[_ngcontent-%COMP%]{display:block;width:100%;overflow-x:auto}.full-width-table[_ngcontent-%COMP%]{width:100%}"]}),et)},{path:"products/:id/edit",component:_}]}],nt=((rt=function t(){_classCallCheck(this,t)}).\u0275mod=n.Mb({type:rt}),rt.\u0275inj=n.Lb({factory:function(t){return new(t||rt)},imports:[[a.f.forChild(it)],a.f]}),rt),ct=r("hctd"),st=((ot=function t(){_classCallCheck(this,t)}).\u0275mod=n.Mb({type:ot}),ot.\u0275inj=n.Lb({factory:function(t){return new(t||ot)},imports:[[o.c,nt,i.n,ct.a,k.c]]}),ot)}}]);