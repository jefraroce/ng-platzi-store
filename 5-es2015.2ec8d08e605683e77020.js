(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{jkDv:function(t,e,i){"use strict";i.r(e),i.d(e,"AdminModule",(function(){return rt}));var r=i("ofXK"),o=i("tyNb"),a=i("3Pt+"),c=i("fXoL"),n=i("X849"),s=i("dNgK"),d=i("Wp6s"),b=i("kmnG"),u=i("qFsG"),l=i("d3UM"),m=i("bTqV"),p=i("NFeN"),h=i("FKr1");function g(t,e){1&t&&(c.Ub(0,"mat-error"),c.Ac(1," El titulo es "),c.Ub(2,"strong"),c.Ac(3,"requerido"),c.Tb(),c.Tb())}function f(t,e){1&t&&(c.Ub(0,"mat-error"),c.Ac(1," El precio es "),c.Ub(2,"strong"),c.Ac(3,"requerido"),c.Tb(),c.Tb())}function T(t,e){1&t&&(c.Ub(0,"mat-error"),c.Ac(1," El precio debe ser mayor a 0 "),c.Tb())}function C(t,e){if(1&t&&(c.Ub(0,"mat-option",15),c.Ac(1),c.Tb()),2&t){const t=e.$implicit;c.mc("value",t),c.Cb(1),c.Cc(" ",t," ")}}function U(t,e){1&t&&(c.Ub(0,"mat-error"),c.Ac(1," La imagen es "),c.Ub(2,"strong"),c.Ac(3,"requerida"),c.Tb(),c.Tb())}let v=(()=>{class t{constructor(t,e,i,r,o){this.fb=t,this.productsService=e,this.snackBar=i,this.route=r,this.router=o,this.product={id:null,title:null,image:null,price:null,description:null},this.productForm=this.fb.group({title:[this.product.title,a.q.required],image:[this.product.image,a.q.required],price:[this.product.price,a.q.required],description:this.product.description}),this.images=["assets/images/camiseta.png","assets/images/hoodie.png","assets/images/mug.png","assets/images/pin.png","assets/images/stickers1.png","assets/images/stickers2.png"]}ngOnInit(){this.route.params.subscribe(t=>{const e=t.id;e&&this.fetchProduct(e)})}generateRandomId(){return Math.ceil(1e3*Math.random()).toString()}fetchProduct(t){this.productsService.getProduct(t).subscribe(t=>{this.product=t,this.productForm.reset(this.product)})}createProduct(t){this.productsService.createProduct(t).subscribe(t=>{this.snackBar.open("Felicidades tu producto ha sido creado."),this.router.navigate(["/admin/products",t.id,"edit"])},t=>{console.error("Error ",t),this.snackBar.open("No se ha podido crear el producto.")})}updateProduct(t){this.productsService.updateProduct(t.id,t).subscribe(t=>{this.product=t,this.snackBar.open("Felicidades tu producto ha sido actualizado.")},t=>{console.error("Error ",t),this.snackBar.open("No se ha podido actualizar el producto.")})}onSubmit(){if(this.productForm.valid){const t=this.productForm.value;this.product.id?(t.id=this.product.id,this.updateProduct(t)):(t.id=this.generateRandomId(),this.createProduct(t))}else this.snackBar.open("Debes completar todos los campos obligatorios.")}}return t.\u0275fac=function(e){return new(e||t)(c.Ob(a.b),c.Ob(n.a),c.Ob(s.a),c.Ob(o.a),c.Ob(o.c))},t.\u0275cmp=c.Ib({type:t,selectors:[["app-product-form"]],decls:36,vars:8,consts:[["novalidate","",1,"max-width--600","mx-auto",3,"formGroup","ngSubmit"],[1,"shipping-card"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","placeholder","Titulo","formControlName","title","required",""],[4,"ngIf"],["matInput","","type","number","min","0","placeholder","Precio","formControlName","price"],[1,"full-width"],["placeholder","Imagen","formControlName","image","appearance","outline"],[3,"value",4,"ngFor","ngForOf"],["for","description"],["matNativeControl","","id","description","name","description","formControlName","description","required",""],["mat-raised-button","","color","primary","type","submit"],["mat-button","","color","secondary","routerLink","/admin/products"],[3,"value"]],template:function(t,e){1&t&&(c.Ub(0,"form",0),c.cc("ngSubmit",(function(){return e.onSubmit()})),c.Ub(1,"mat-card",1),c.Ub(2,"mat-card-header"),c.Ub(3,"mat-card-title"),c.Ac(4),c.Tb(),c.Tb(),c.Ub(5,"mat-card-content"),c.Ub(6,"div",2),c.Ub(7,"div",3),c.Ub(8,"mat-form-field",4),c.Pb(9,"input",5),c.yc(10,g,4,0,"mat-error",6),c.Tb(),c.Tb(),c.Tb(),c.Ub(11,"div",2),c.Ub(12,"div",3),c.Ub(13,"mat-form-field",4),c.Pb(14,"input",7),c.yc(15,f,4,0,"mat-error",6),c.yc(16,T,2,0,"mat-error",6),c.Tb(),c.Tb(),c.Tb(),c.Ub(17,"div",2),c.Ub(18,"div",3),c.Ub(19,"mat-form-field",8),c.Ub(20,"mat-select",9),c.yc(21,C,2,2,"mat-option",10),c.Tb(),c.yc(22,U,4,0,"mat-error",6),c.Tb(),c.Tb(),c.Tb(),c.Ub(23,"div",2),c.Ub(24,"div",3),c.Ub(25,"mat-form-field",4),c.Ub(26,"mat-label",11),c.Ac(27,"Descripci\xf3n"),c.Tb(),c.Pb(28,"textarea",12),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Ub(29,"mat-card-actions"),c.Ub(30,"button",13),c.Ub(31,"mat-icon"),c.Ac(32,"save"),c.Tb(),c.Ac(33),c.Tb(),c.Ub(34,"a",14),c.Ac(35,"Volver a la lista"),c.Tb(),c.Tb(),c.Tb(),c.Tb()),2&t&&(c.mc("formGroup",e.productForm),c.Cb(4),c.Cc("",e.product.id?"Editando":"Nuevo"," Producto"),c.Cb(6),c.mc("ngIf",e.productForm.controls.title.hasError("required")),c.Cb(5),c.mc("ngIf",e.productForm.controls.price.hasError("required")),c.Cb(1),c.mc("ngIf",e.productForm.controls.price.hasError("min")),c.Cb(5),c.mc("ngForOf",e.images),c.Cb(1),c.mc("ngIf",e.productForm.controls.image.hasError("required")),c.Cb(11),c.Cc("\xa0 ",e.product.id?"Actualizar":"Crear"," "))},directives:[a.r,a.k,a.f,d.a,d.e,d.h,d.d,b.c,u.a,a.a,a.j,a.e,a.p,r.l,a.n,l.a,r.k,b.f,d.b,m.b,p.a,m.a,o.e,b.b,h.j],styles:[".full-width[_ngcontent-%COMP%]{width:100%}.shipping-card[_ngcontent-%COMP%]{min-width:120px;margin:20px auto}.mat-radio-button[_ngcontent-%COMP%]{display:block;margin:5px 0}.row[_ngcontent-%COMP%]{display:flex;flex-direction:row}.col[_ngcontent-%COMP%]{flex:1;margin-right:20px}.col[_ngcontent-%COMP%]:last-child{margin-right:0}"]}),t})();var y=i("0MNC"),w=i("lJxs"),P=i("UXun"),S=i("XhcP"),k=i("/t3+"),O=i("MutI");function A(t,e){if(1&t){const t=c.Vb();c.Ub(0,"button",8),c.cc("click",(function(){return c.sc(t),c.gc(),c.qc(2).toggle()})),c.Ub(1,"mat-icon",9),c.Ac(2,"menu"),c.Tb(),c.Tb()}}let D=(()=>{class t{constructor(t){this.breakpointObserver=t,this.isHandset$=this.breakpointObserver.observe(y.b.Handset).pipe(Object(w.a)(t=>t.matches),Object(P.a)())}}return t.\u0275fac=function(e){return new(e||t)(c.Ob(y.a))},t.\u0275cmp=c.Ib({type:t,selectors:[["app-nav"]],decls:22,vars:12,consts:[[1,"sidenav-container"],["fixedInViewport","",1,"sidenav",3,"mode","opened"],["drawer",""],["mat-list-item","","routerLink","/admin/products/new"],["mat-list-item","","routerLink","/admin/products"],["mat-list-item","","routerLink","#"],["color","primary"],["type","button","aria-label","Toggle sidenav","mat-icon-button","",3,"click",4,"ngIf"],["type","button","aria-label","Toggle sidenav","mat-icon-button","",3,"click"],["aria-label","Side nav toggle icon"]],template:function(t,e){1&t&&(c.Ub(0,"mat-sidenav-container",0),c.Ub(1,"mat-sidenav",1,2),c.hc(3,"async"),c.hc(4,"async"),c.hc(5,"async"),c.Ub(6,"mat-toolbar"),c.Ac(7,"Menu"),c.Tb(),c.Ub(8,"mat-nav-list"),c.Ub(9,"a",3),c.Ac(10,"Crear producto"),c.Tb(),c.Ub(11,"a",4),c.Ac(12,"Ver productos"),c.Tb(),c.Ub(13,"a",5),c.Ac(14,"Dashboard"),c.Tb(),c.Tb(),c.Tb(),c.Ub(15,"mat-sidenav-content"),c.Ub(16,"mat-toolbar",6),c.yc(17,A,3,0,"button",7),c.hc(18,"async"),c.Ub(19,"span"),c.Ac(20,"Platzi Store"),c.Tb(),c.Tb(),c.Pb(21,"router-outlet"),c.Tb(),c.Tb()),2&t&&(c.Cb(1),c.mc("mode",c.ic(4,6,e.isHandset$)?"over":"side")("opened",!1===c.ic(5,8,e.isHandset$)),c.Db("role",c.ic(3,4,e.isHandset$)?"dialog":"navigation"),c.Cb(16),c.mc("ngIf",c.ic(18,10,e.isHandset$)))},directives:[S.b,S.a,k.a,O.c,O.a,o.e,S.c,r.l,o.g,m.b,p.a],pipes:[r.b],styles:[".sidenav-container[_ngcontent-%COMP%]{height:100%}.sidenav[_ngcontent-%COMP%]{width:200px}.sidenav[_ngcontent-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{background:inherit}.mat-toolbar.mat-primary[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;top:0;z-index:1}"]}),t})();var x=i("M9IT"),I=i("Dh3D"),M=i("+0xr"),F=i("0EQZ"),q=i("LRne"),R=i("VRyK");class B extends F.b{constructor(t){super(),this.products=t,this.data=[],this.data=t}connect(){const t=[Object(q.a)(this.data),this.paginator.page,this.sort.sortChange];return Object(R.a)(...t).pipe(Object(w.a)(()=>this.getPagedData(this.getSortedData([...this.data]))))}disconnect(){}getPagedData(t){return t.splice(this.paginator.pageIndex*this.paginator.pageSize,this.paginator.pageSize)}getSortedData(t){return this.sort.active&&""!==this.sort.direction?t.sort((t,e)=>{const i="asc"===this.sort.direction;switch(this.sort.active){case"title":return E(t.title,e.title,i);case"id":return E(t.id,e.id,i);default:return 0}}):t}}function E(t,e,i){return(t<e?-1:1)*(i?1:-1)}function N(t,e){1&t&&(c.Ub(0,"th",18),c.Ac(1,"Imagen"),c.Tb())}function _(t,e){if(1&t&&(c.Ub(0,"td",19),c.Pb(1,"img",20),c.Tb()),2&t){const t=e.$implicit;c.Cb(1),c.mc("src",t.image,c.tc)}}function j(t,e){1&t&&(c.Ub(0,"th",18),c.Ac(1,"Id"),c.Tb())}function z(t,e){if(1&t&&(c.Ub(0,"td",19),c.Ac(1),c.Tb()),2&t){const t=e.$implicit;c.Cb(1),c.Bc(t.id)}}function $(t,e){1&t&&(c.Ub(0,"th",18),c.Ac(1,"Titulo"),c.Tb())}function L(t,e){if(1&t&&(c.Ub(0,"td",19),c.Ac(1),c.Tb()),2&t){const t=e.$implicit;c.Cb(1),c.Bc(t.title)}}function H(t,e){1&t&&(c.Ub(0,"th",18),c.Ac(1,"Descripci\xf3n"),c.Tb())}function V(t,e){if(1&t&&(c.Ub(0,"td",19),c.Ac(1),c.hc(2,"slice"),c.Tb()),2&t){const t=e.$implicit;c.Cb(1),c.Bc(c.jc(2,1,t.description,0,80))}}function G(t,e){1&t&&(c.Ub(0,"th",18),c.Ac(1,"Precio"),c.Tb())}function X(t,e){if(1&t&&(c.Ub(0,"td",21),c.Ac(1),c.hc(2,"currency"),c.Tb()),2&t){const t=e.$implicit;c.Cb(1),c.Bc(c.ic(2,1,t.price))}}function K(t,e){1&t&&c.Pb(0,"th",22)}const J=function(t){return["/admin/products",t,"edit"]};function Q(t,e){if(1&t){const t=c.Vb();c.Ub(0,"td",23),c.Ub(1,"a",24),c.Ub(2,"mat-icon"),c.Ac(3,"create"),c.Tb(),c.Tb(),c.Ub(4,"button",25),c.cc("click",(function(){c.sc(t);const i=e.$implicit;return c.gc().deleteProduct(i.id)})),c.Ub(5,"mat-icon"),c.Ac(6,"delete"),c.Tb(),c.Tb(),c.Tb()}if(2&t){const t=e.$implicit;c.Cb(1),c.mc("routerLink",c.oc(1,J,t.id))}}function W(t,e){1&t&&c.Pb(0,"tr",26)}function Z(t,e){1&t&&c.Pb(0,"tr",27)}const Y=function(){return[25,50,100,250]},tt=[{path:"",component:D,children:[{path:"products",component:(()=>{class t{constructor(t,e,i){this.productsService=t,this.snackBar=e,this.changeDetectorRefs=i,this.displayedColumns=["id","image","title","description","price","actions"]}ngOnInit(){this.fetchProducts()}fetchProducts(){this.productsService.getAllProducts().subscribe(t=>{this.setDataSource(t)})}setDataSource(t){this.dataSource=new B(t),this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator,this.table.dataSource=this.dataSource}deleteProduct(t){confirm("\xbfEsta usted seguro?")&&this.productsService.deleteProduct(t).subscribe(()=>{const e=this.dataSource.data.findIndex(e=>e.id===t);e>=0&&(this.dataSource.data.splice(e,1),this.setDataSource(this.dataSource.data),this.snackBar.open("Genial el producto ha sido eliminado."))},t=>{console.error("Error deleting product ",t),this.snackBar.open("No se ha podido eliminar el producto.")})}}return t.\u0275fac=function(e){return new(e||t)(c.Ob(n.a),c.Ob(s.a),c.Ob(c.h))},t.\u0275cmp=c.Ib({type:t,selectors:[["app-product-list"]],viewQuery:function(t,e){var i;1&t&&(c.Fc(x.a,!0),c.Fc(I.a,!0),c.Fc(M.j,!0)),2&t&&(c.pc(i=c.dc())&&(e.paginator=i.first),c.pc(i=c.dc())&&(e.sort=i.first),c.pc(i=c.dc())&&(e.table=i.first))},decls:26,vars:7,consts:[["mat-raised-button","","color","primary","routerLink","/admin/products/new"],[1,"mat-elevation-z8","max-width--900","m-1","table-container"],["mat-table","","matSort","","aria-label","Productos",1,"full-width-table"],["matColumnDef","image"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","id"],["matColumnDef","title"],["matColumnDef","description"],["matColumnDef","price"],["mat-cell","","class","text-right",4,"matCellDef"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","text-center",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageIndex","pageSize","pageSizeOptions"],["paginator",""],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["alt","",1,"thumbnail",3,"src"],["mat-cell","",1,"text-right"],["mat-header-cell",""],["mat-cell","",1,"text-center"],["mat-icon-button","","color","primary","aria-label","Boton para editar producto","title","Editar",3,"routerLink"],["mat-icon-button","","color","warn","aria-label","Boton para eliminar producto","title","Eliminar",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(c.Ub(0,"a",0),c.Ac(1,"Crear producto"),c.Tb(),c.Ub(2,"div",1),c.Ub(3,"table",2),c.Sb(4,3),c.yc(5,N,2,0,"th",4),c.yc(6,_,2,1,"td",5),c.Rb(),c.Sb(7,6),c.yc(8,j,2,0,"th",4),c.yc(9,z,2,1,"td",5),c.Rb(),c.Sb(10,7),c.yc(11,$,2,0,"th",4),c.yc(12,L,2,1,"td",5),c.Rb(),c.Sb(13,8),c.yc(14,H,2,0,"th",4),c.yc(15,V,3,5,"td",5),c.Rb(),c.Sb(16,9),c.yc(17,G,2,0,"th",4),c.yc(18,X,3,3,"td",10),c.Rb(),c.Sb(19,11),c.yc(20,K,1,0,"th",12),c.yc(21,Q,7,3,"td",13),c.Rb(),c.yc(22,W,1,0,"tr",14),c.yc(23,Z,1,0,"tr",15),c.Tb(),c.Pb(24,"mat-paginator",16,17),c.Tb()),2&t&&(c.Cb(22),c.mc("matHeaderRowDef",e.displayedColumns),c.Cb(1),c.mc("matRowDefColumns",e.displayedColumns),c.Cb(1),c.mc("length",null==e.dataSource?null:e.dataSource.data.length)("pageIndex",0)("pageSize",50)("pageSizeOptions",c.nc(6,Y)))},directives:[m.a,o.e,M.j,I.a,M.c,M.e,M.b,M.g,M.i,x.a,M.d,I.b,M.a,p.a,m.b,M.f,M.h],pipes:[r.r,r.d],styles:["[_nghost-%COMP%]{display:block;width:calc(100% - 32px);box-sizing:border-box;margin:0 auto;padding:5px}.table-container[_ngcontent-%COMP%]{display:block;width:100%;overflow-x:auto}.full-width-table[_ngcontent-%COMP%]{width:100%}"]}),t})()},{path:"products/new",component:v},{path:"products/:id/edit",component:v}]}];let et=(()=>{class t{}return t.\u0275mod=c.Mb({type:t}),t.\u0275inj=c.Lb({factory:function(e){return new(e||t)},imports:[[o.f.forChild(tt)],o.f]}),t})();var it=i("hctd");let rt=(()=>{class t{}return t.\u0275mod=c.Mb({type:t}),t.\u0275inj=c.Lb({factory:function(e){return new(e||t)},imports:[[r.c,et,a.o,it.a,y.c]]}),t})()}}]);