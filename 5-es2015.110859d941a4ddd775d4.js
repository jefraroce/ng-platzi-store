(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{jkDv:function(t,e,i){"use strict";i.r(e),i.d(e,"AdminModule",(function(){return rt}));var r=i("ofXK"),o=i("tyNb"),c=i("3Pt+"),a=i("fXoL"),n=i("X849"),s=i("dNgK"),d=i("Wp6s"),b=i("kmnG"),l=i("qFsG"),u=i("d3UM"),m=i("bTqV"),p=i("NFeN"),h=i("FKr1");function g(t,e){1&t&&(a.Ub(0,"mat-error"),a.Ac(1," El titulo es "),a.Ub(2,"strong"),a.Ac(3,"requerido"),a.Tb(),a.Tb())}function f(t,e){1&t&&(a.Ub(0,"mat-error"),a.Ac(1," El precio es "),a.Ub(2,"strong"),a.Ac(3,"requerido"),a.Tb(),a.Tb())}function T(t,e){1&t&&(a.Ub(0,"mat-error"),a.Ac(1," El precio debe ser mayor a 0 "),a.Tb())}function C(t,e){if(1&t&&(a.Ub(0,"mat-option",15),a.Ac(1),a.Tb()),2&t){const t=e.$implicit;a.mc("value",t),a.Cb(1),a.Cc(" ",t," ")}}function U(t,e){1&t&&(a.Ub(0,"mat-error"),a.Ac(1," La imagen es "),a.Ub(2,"strong"),a.Ac(3,"requerida"),a.Tb(),a.Tb())}let v=(()=>{class t{constructor(t,e,i,r,o){this.fb=t,this.productsService=e,this.snackBar=i,this.route=r,this.router=o,this.product={id:null,title:null,image:null,price:null,description:null},this.productForm=this.fb.group({title:[this.product.title,c.p.required],image:[this.product.image,c.p.required],price:[this.product.price,c.p.required],description:this.product.description}),this.images=["assets/images/camiseta.png","assets/images/hoodie.png","assets/images/mug.png","assets/images/pin.png","assets/images/stickers1.png","assets/images/stickers2.png"]}ngOnInit(){this.route.params.subscribe(t=>{const e=t.id;e&&this.fetchProduct(e)})}generateRandomId(){return Math.ceil(1e3*Math.random()).toString()}fetchProduct(t){this.productsService.getProduct(t).subscribe(t=>{this.product=t,this.productForm.reset(this.product)})}createProduct(t){this.productsService.createProduct(t).subscribe(t=>{this.snackBar.open("Felicidades tu producto ha sido creado."),this.router.navigate(["/admin/products",t.id,"edit"])},t=>{console.error("Error ",t),this.snackBar.open("No se ha podido crear el producto.")})}updateProduct(t){this.productsService.updateProduct(t.id,t).subscribe(t=>{this.product=t,this.snackBar.open("Felicidades tu producto ha sido actualizado.")},t=>{console.error("Error ",t),this.snackBar.open("No se ha podido actualizar el producto.")})}onSubmit(){if(this.productForm.valid){const t=this.productForm.value;this.product.id?(t.id=this.product.id,this.updateProduct(t)):(t.id=this.generateRandomId(),this.createProduct(t))}else this.snackBar.open("Debes completar todos los campos obligatorios.")}}return t.\u0275fac=function(e){return new(e||t)(a.Ob(c.b),a.Ob(n.a),a.Ob(s.a),a.Ob(o.a),a.Ob(o.c))},t.\u0275cmp=a.Ib({type:t,selectors:[["app-product-form"]],decls:36,vars:8,consts:[["novalidate","",1,"max-width--600","mx-auto",3,"formGroup","ngSubmit"],[1,"shipping-card"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","placeholder","Titulo","formControlName","title","required",""],[4,"ngIf"],["matInput","","type","number","min","0","placeholder","Precio","formControlName","price"],[1,"full-width"],["placeholder","Imagen","formControlName","image","appearance","outline"],[3,"value",4,"ngFor","ngForOf"],["for","description"],["matNativeControl","","id","description","name","description","formControlName","description","required",""],["mat-raised-button","","color","primary","type","submit"],["mat-button","","color","secondary","routerLink","/admin/products"],[3,"value"]],template:function(t,e){1&t&&(a.Ub(0,"form",0),a.cc("ngSubmit",(function(){return e.onSubmit()})),a.Ub(1,"mat-card",1),a.Ub(2,"mat-card-header"),a.Ub(3,"mat-card-title"),a.Ac(4),a.Tb(),a.Tb(),a.Ub(5,"mat-card-content"),a.Ub(6,"div",2),a.Ub(7,"div",3),a.Ub(8,"mat-form-field",4),a.Pb(9,"input",5),a.yc(10,g,4,0,"mat-error",6),a.Tb(),a.Tb(),a.Tb(),a.Ub(11,"div",2),a.Ub(12,"div",3),a.Ub(13,"mat-form-field",4),a.Pb(14,"input",7),a.yc(15,f,4,0,"mat-error",6),a.yc(16,T,2,0,"mat-error",6),a.Tb(),a.Tb(),a.Tb(),a.Ub(17,"div",2),a.Ub(18,"div",3),a.Ub(19,"mat-form-field",8),a.Ub(20,"mat-select",9),a.yc(21,C,2,2,"mat-option",10),a.Tb(),a.yc(22,U,4,0,"mat-error",6),a.Tb(),a.Tb(),a.Tb(),a.Ub(23,"div",2),a.Ub(24,"div",3),a.Ub(25,"mat-form-field",4),a.Ub(26,"mat-label",11),a.Ac(27,"Descripci\xf3n"),a.Tb(),a.Pb(28,"textarea",12),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Ub(29,"mat-card-actions"),a.Ub(30,"button",13),a.Ub(31,"mat-icon"),a.Ac(32,"save"),a.Tb(),a.Ac(33),a.Tb(),a.Ub(34,"a",14),a.Ac(35,"Volver a la lista"),a.Tb(),a.Tb(),a.Tb(),a.Tb()),2&t&&(a.mc("formGroup",e.productForm),a.Cb(4),a.Cc("",e.product.id?"Editando":"Nuevo"," Producto"),a.Cb(6),a.mc("ngIf",e.productForm.controls.title.hasError("required")),a.Cb(5),a.mc("ngIf",e.productForm.controls.price.hasError("required")),a.Cb(1),a.mc("ngIf",e.productForm.controls.price.hasError("min")),a.Cb(5),a.mc("ngForOf",e.images),a.Cb(1),a.mc("ngIf",e.productForm.controls.image.hasError("required")),a.Cb(11),a.Cc("\xa0 ",e.product.id?"Actualizar":"Crear"," "))},directives:[c.q,c.j,c.e,d.a,d.e,d.h,d.d,b.c,l.a,c.a,c.i,c.d,c.o,r.l,c.m,u.a,r.k,b.f,d.b,m.b,p.a,m.a,o.e,b.b,h.j],styles:[".full-width[_ngcontent-%COMP%]{width:100%}.shipping-card[_ngcontent-%COMP%]{min-width:120px;margin:20px auto}.mat-radio-button[_ngcontent-%COMP%]{display:block;margin:5px 0}.row[_ngcontent-%COMP%]{display:flex;flex-direction:row}.col[_ngcontent-%COMP%]{flex:1;margin-right:20px}.col[_ngcontent-%COMP%]:last-child{margin-right:0}"]}),t})();var y=i("0MNC"),P=i("lJxs"),w=i("UXun"),k=i("XhcP"),S=i("/t3+"),O=i("MutI");function A(t,e){if(1&t){const t=a.Vb();a.Ub(0,"button",8),a.cc("click",(function(){return a.sc(t),a.gc(),a.qc(2).toggle()})),a.Ub(1,"mat-icon",9),a.Ac(2,"menu"),a.Tb(),a.Tb()}}let x=(()=>{class t{constructor(t){this.breakpointObserver=t,this.isHandset$=this.breakpointObserver.observe(y.b.Handset).pipe(Object(P.a)(t=>t.matches),Object(w.a)())}}return t.\u0275fac=function(e){return new(e||t)(a.Ob(y.a))},t.\u0275cmp=a.Ib({type:t,selectors:[["app-nav"]],decls:22,vars:12,consts:[[1,"sidenav-container"],["fixedInViewport","",1,"sidenav",3,"mode","opened"],["drawer",""],["mat-list-item","","routerLink","/admin/create"],["mat-list-item","","routerLink","/admin/products"],["mat-list-item","","routerLink","#"],["color","primary"],["type","button","aria-label","Toggle sidenav","mat-icon-button","",3,"click",4,"ngIf"],["type","button","aria-label","Toggle sidenav","mat-icon-button","",3,"click"],["aria-label","Side nav toggle icon"]],template:function(t,e){1&t&&(a.Ub(0,"mat-sidenav-container",0),a.Ub(1,"mat-sidenav",1,2),a.hc(3,"async"),a.hc(4,"async"),a.hc(5,"async"),a.Ub(6,"mat-toolbar"),a.Ac(7,"Menu"),a.Tb(),a.Ub(8,"mat-nav-list"),a.Ub(9,"a",3),a.Ac(10,"Crear producto"),a.Tb(),a.Ub(11,"a",4),a.Ac(12,"Ver productos"),a.Tb(),a.Ub(13,"a",5),a.Ac(14,"Link 3"),a.Tb(),a.Tb(),a.Tb(),a.Ub(15,"mat-sidenav-content"),a.Ub(16,"mat-toolbar",6),a.yc(17,A,3,0,"button",7),a.hc(18,"async"),a.Ub(19,"span"),a.Ac(20,"Platzi Store"),a.Tb(),a.Tb(),a.Pb(21,"router-outlet"),a.Tb(),a.Tb()),2&t&&(a.Cb(1),a.mc("mode",a.ic(4,6,e.isHandset$)?"over":"side")("opened",!1===a.ic(5,8,e.isHandset$)),a.Db("role",a.ic(3,4,e.isHandset$)?"dialog":"navigation"),a.Cb(16),a.mc("ngIf",a.ic(18,10,e.isHandset$)))},directives:[k.b,k.a,S.a,O.c,O.a,o.e,k.c,r.l,o.g,m.b,p.a],pipes:[r.b],styles:[".sidenav-container[_ngcontent-%COMP%]{height:100%}.sidenav[_ngcontent-%COMP%]{width:200px}.sidenav[_ngcontent-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{background:inherit}.mat-toolbar.mat-primary[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;top:0;z-index:1}"]}),t})();var D=i("M9IT"),I=i("Dh3D"),M=i("+0xr"),F=i("0EQZ"),E=i("LRne"),q=i("VRyK");class R extends F.b{constructor(t){super(),this.products=t,this.data=[],this.data=t}connect(){const t=[Object(E.a)(this.data),this.paginator.page,this.sort.sortChange];return Object(q.a)(...t).pipe(Object(P.a)(()=>this.getPagedData(this.getSortedData([...this.data]))))}disconnect(){}getPagedData(t){return t.splice(this.paginator.pageIndex*this.paginator.pageSize,this.paginator.pageSize)}getSortedData(t){return this.sort.active&&""!==this.sort.direction?t.sort((t,e)=>{const i="asc"===this.sort.direction;switch(this.sort.active){case"title":return B(t.title,e.title,i);case"id":return B(t.id,e.id,i);default:return 0}}):t}}function B(t,e,i){return(t<e?-1:1)*(i?1:-1)}function N(t,e){1&t&&(a.Ub(0,"th",18),a.Ac(1,"Imagen"),a.Tb())}function _(t,e){if(1&t&&(a.Ub(0,"td",19),a.Pb(1,"img",20),a.Tb()),2&t){const t=e.$implicit;a.Cb(1),a.mc("src",t.image,a.tc)}}function j(t,e){1&t&&(a.Ub(0,"th",18),a.Ac(1,"Id"),a.Tb())}function z(t,e){if(1&t&&(a.Ub(0,"td",19),a.Ac(1),a.Tb()),2&t){const t=e.$implicit;a.Cb(1),a.Bc(t.id)}}function L(t,e){1&t&&(a.Ub(0,"th",18),a.Ac(1,"Titulo"),a.Tb())}function $(t,e){if(1&t&&(a.Ub(0,"td",19),a.Ac(1),a.Tb()),2&t){const t=e.$implicit;a.Cb(1),a.Bc(t.title)}}function H(t,e){1&t&&(a.Ub(0,"th",18),a.Ac(1,"Descripci\xf3n"),a.Tb())}function V(t,e){if(1&t&&(a.Ub(0,"td",19),a.Ac(1),a.hc(2,"slice"),a.Tb()),2&t){const t=e.$implicit;a.Cb(1),a.Bc(a.jc(2,1,t.description,0,80))}}function X(t,e){1&t&&(a.Ub(0,"th",18),a.Ac(1,"Precio"),a.Tb())}function G(t,e){if(1&t&&(a.Ub(0,"td",21),a.Ac(1),a.hc(2,"currency"),a.Tb()),2&t){const t=e.$implicit;a.Cb(1),a.Bc(a.ic(2,1,t.price))}}function K(t,e){1&t&&a.Pb(0,"th",22)}const J=function(t){return["/admin/products",t,"edit"]};function Q(t,e){if(1&t){const t=a.Vb();a.Ub(0,"td",23),a.Ub(1,"a",24),a.Ub(2,"mat-icon"),a.Ac(3,"create"),a.Tb(),a.Tb(),a.Ub(4,"button",25),a.cc("click",(function(){a.sc(t);const i=e.$implicit;return a.gc().deleteProduct(i.id)})),a.Ub(5,"mat-icon"),a.Ac(6,"delete"),a.Tb(),a.Tb(),a.Tb()}if(2&t){const t=e.$implicit;a.Cb(1),a.mc("routerLink",a.oc(1,J,t.id))}}function W(t,e){1&t&&a.Pb(0,"tr",26)}function Z(t,e){1&t&&a.Pb(0,"tr",27)}const Y=function(){return[25,50,100,250]},tt=[{path:"",component:x,children:[{path:"create",component:v},{path:"products",component:(()=>{class t{constructor(t,e){this.productsService=t,this.snackBar=e,this.displayedColumns=["id","image","title","description","price","actions"]}ngOnInit(){this.fetchProducts()}fetchProducts(){this.productsService.getAllProducts().subscribe(t=>{this.dataSource=new R(t),this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator,this.table.dataSource=this.dataSource})}deleteProduct(t){confirm("\xbfEsta usted seguro?")&&this.productsService.deleteProduct(t).subscribe(t=>{this.fetchProducts()},t=>{console.error("Error deleting product ",t),this.snackBar.open("No se ha podido eliminar el producto.")})}}return t.\u0275fac=function(e){return new(e||t)(a.Ob(n.a),a.Ob(s.a))},t.\u0275cmp=a.Ib({type:t,selectors:[["app-product-list"]],viewQuery:function(t,e){var i;1&t&&(a.Fc(D.a,!0),a.Fc(I.a,!0),a.Fc(M.j,!0)),2&t&&(a.pc(i=a.dc())&&(e.paginator=i.first),a.pc(i=a.dc())&&(e.sort=i.first),a.pc(i=a.dc())&&(e.table=i.first))},decls:26,vars:7,consts:[[1,"mat-elevation-z8","max-width--900","m-1","table-container"],["mat-table","","matSort","","aria-label","Elements",1,"full-width-table"],["matColumnDef","image"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","id"],["matColumnDef","title"],["matColumnDef","description"],["matColumnDef","price"],["mat-cell","","class","text-right",4,"matCellDef"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","text-center",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageIndex","pageSize","pageSizeOptions"],["paginator",""],["mat-raised-button","","color","primary","routerLink","/admin/create"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["alt","",1,"thumbnail",3,"src"],["mat-cell","",1,"text-right"],["mat-header-cell",""],["mat-cell","",1,"text-center"],["mat-icon-button","","color","primary","aria-label","Boton para editar producto","title","Editar",3,"routerLink"],["mat-icon-button","","color","warn","aria-label","Boton para eliminar producto","title","Eliminar",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(a.Ub(0,"div",0),a.Ub(1,"table",1),a.Sb(2,2),a.yc(3,N,2,0,"th",3),a.yc(4,_,2,1,"td",4),a.Rb(),a.Sb(5,5),a.yc(6,j,2,0,"th",3),a.yc(7,z,2,1,"td",4),a.Rb(),a.Sb(8,6),a.yc(9,L,2,0,"th",3),a.yc(10,$,2,1,"td",4),a.Rb(),a.Sb(11,7),a.yc(12,H,2,0,"th",3),a.yc(13,V,3,5,"td",4),a.Rb(),a.Sb(14,8),a.yc(15,X,2,0,"th",3),a.yc(16,G,3,3,"td",9),a.Rb(),a.Sb(17,10),a.yc(18,K,1,0,"th",11),a.yc(19,Q,7,3,"td",12),a.Rb(),a.yc(20,W,1,0,"tr",13),a.yc(21,Z,1,0,"tr",14),a.Tb(),a.Pb(22,"mat-paginator",15,16),a.Tb(),a.Ub(24,"a",17),a.Ac(25,"Crear producto"),a.Tb()),2&t&&(a.Cb(20),a.mc("matHeaderRowDef",e.displayedColumns),a.Cb(1),a.mc("matRowDefColumns",e.displayedColumns),a.Cb(1),a.mc("length",null==e.dataSource?null:e.dataSource.data.length)("pageIndex",0)("pageSize",50)("pageSizeOptions",a.nc(6,Y)))},directives:[M.j,I.a,M.c,M.e,M.b,M.g,M.i,D.a,m.a,o.e,M.d,I.b,M.a,p.a,m.b,M.f,M.h],pipes:[r.r,r.d],styles:["[_nghost-%COMP%]{display:block;width:calc(100% - 32px);box-sizing:border-box;margin:0 auto}.table-container[_ngcontent-%COMP%]{display:block;width:100%;overflow-x:auto}.full-width-table[_ngcontent-%COMP%]{width:100%}"]}),t})()},{path:"products/:id/edit",component:v}]}];let et=(()=>{class t{}return t.\u0275mod=a.Mb({type:t}),t.\u0275inj=a.Lb({factory:function(e){return new(e||t)},imports:[[o.f.forChild(tt)],o.f]}),t})();var it=i("hctd");let rt=(()=>{class t{}return t.\u0275mod=a.Mb({type:t}),t.\u0275inj=a.Lb({factory:function(e){return new(e||t)},imports:[[r.c,et,c.n,it.a,y.c]]}),t})()}}]);